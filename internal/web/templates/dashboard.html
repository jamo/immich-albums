<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Immich Albums - Dashboard</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: #f5f5f5;
            color: #333;
        }
        .header {
            background: white;
            border-bottom: 1px solid #e0e0e0;
            padding: 1rem 2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .header h1 {
            font-size: 1.5rem;
            font-weight: 600;
        }
        .nav {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }
        .nav a {
            padding: 0.5rem 1rem;
            text-decoration: none;
            color: #666;
            border-radius: 4px;
            transition: all 0.2s;
        }
        .nav a:hover, .nav a.active {
            background: #007bff;
            color: white;
        }
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .stat-card h3 {
            font-size: 0.875rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
        }
        .stat-card .value {
            font-size: 2rem;
            font-weight: 600;
            color: #007bff;
        }
        .card {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        .card h2 {
            font-size: 1.25rem;
            margin-bottom: 1rem;
        }
        .card p {
            line-height: 1.6;
            color: #666;
        }
        .workflow {
            list-style: none;
            counter-reset: step-counter;
        }
        .workflow li {
            counter-increment: step-counter;
            margin-bottom: 1rem;
            padding-left: 3rem;
            position: relative;
        }
        .workflow li:before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            width: 2rem;
            height: 2rem;
            background: #007bff;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Immich Albums - Trip Detection</h1>
        <div class="nav">
            <a href="/" class="active">Dashboard</a>
            <a href="/sessions">Sessions Map</a>
            <a href="/heatmap">Activity Heatmap</a>
            <a href="/homes">Home Locations</a>
            <a href="/trips">Trips</a>
            <a href="/coverage">Coverage Analysis</a>
        </div>
    </div>

    <div class="container">
        <div class="stats">
            <div class="stat-card">
                <h3>Total Sessions</h3>
                <div class="value">{{.TotalSessions}}</div>
            </div>
            <div class="stat-card">
                <h3>Total Photos</h3>
                <div class="value">{{.TotalAssets}}</div>
            </div>
            <div class="stat-card">
                <h3>Photos with GPS</h3>
                <div class="value">{{.AssetsWithGPS}}</div>
            </div>
            <div class="stat-card">
                <h3>Devices</h3>
                <div class="value">{{.TotalDevices}}</div>
            </div>
            <div class="stat-card">
                <h3>Home Locations</h3>
                <div class="value">{{.TotalHomes}}</div>
            </div>
            <div class="stat-card">
                <h3>Trips Detected</h3>
                <div class="value">{{.TotalTrips}}</div>
            </div>
        </div>

        <div class="card">
            <h2>Workflow</h2>
            <ol class="workflow">
                <li><strong>View Sessions:</strong> Go to Sessions Map to see all detected photo sessions on an interactive map</li>
                <li><strong>Analyze Activity:</strong> Use the Activity Heatmap to identify where you take most photos</li>
                <li><strong>Label Homes:</strong> Mark your home locations to distinguish trips from daily activities</li>
                <li><strong>Detect Trips:</strong> Run trip detection to identify journeys based on distance from home</li>
                <li><strong>Create Albums:</strong> Generate albums in Immich from detected trips</li>
            </ol>
        </div>

        <div class="card">
            <h2>About</h2>
            <p>
                This tool analyzes your photo collection to automatically detect trips and create albums.
                It uses location data, device information, and temporal clustering to group photos into
                meaningful sessions. By inferring locations for DSLR photos from nearby phone photos,
                it can handle photos without GPS data.
            </p>
        </div>
    </div>
</body>
</html>
